# æ™ºèƒ½åŠ©æ‰‹èŠå¤©æœåŠ¡å™¨

åŸºäº LangGraph å’Œé­”å¡”å¤§æ¨¡å‹çš„æ™ºèƒ½åŠ©æ‰‹èŠå¤©æœåŠ¡å™¨ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– åŸºäº GLM-4.5 å¤§æ¨¡å‹çš„æ™ºèƒ½å¯¹è¯
- ğŸ› ï¸ **å·¥å…·è°ƒç”¨æ”¯æŒ** - ä½¿ç”¨ LangGraph ReAct Agent
- ğŸ’¬ æ”¯æŒå¤æ‚é—®é¢˜å›ç­”å’Œå¤šè½®å¯¹è¯
- ğŸŒ ä½¿ç”¨é­”å¡” API æœåŠ¡ï¼Œç¨³å®šå¯é 
- ğŸ”§ OpenAI å…¼å®¹æ ¼å¼ï¼Œæ˜“äºé›†æˆ
- ğŸŒŸ å‹å¥½çš„ä¸­æ–‡äº¤äº’ä½“éªŒ
- ğŸš€ ç®€å•æ˜“ç”¨çš„å¯åŠ¨æ–¹å¼

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -e .
```

### 2. å¯åŠ¨æœåŠ¡å™¨

**æ¨èæ–¹å¼ï¼ˆè‡ªåŠ¨é…ç½®ç¯å¢ƒï¼‰ï¼š**
```bash
python start.py
```

**æˆ–è€…æ‰‹åŠ¨å¯åŠ¨ï¼š**
```bash
python run.py
```

**æˆ–è€…ç›´æ¥ä½¿ç”¨ï¼š**
```bash
langgraph dev
```

### 3. è®¿é—®æœåŠ¡

- **API æœåŠ¡**: http://localhost:2024
- **API æ–‡æ¡£**: http://localhost:2024/docs
- **Studio UI**: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024

## é¡¹ç›®ç»“æ„

```
agent-chat-server/
â”œâ”€â”€ src/agent/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ graph.py          # æ™ºèƒ½åŠ©æ‰‹æ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ .env                  # ç¯å¢ƒé…ç½®
â”œâ”€â”€ langgraph.json        # LangGraph é…ç½®
â”œâ”€â”€ pyproject.toml        # é¡¹ç›®é…ç½®
â”œâ”€â”€ run.py               # å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md            # è¯´æ˜æ–‡æ¡£
```

## é…ç½®è¯´æ˜

åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®é­”å¡”å¤§æ¨¡å‹ï¼š

```bash
# é­”å¡”å¤§æ¨¡å‹é…ç½® (OpenAI å…¼å®¹æ ¼å¼)
OPENAI_API_KEY=ms-0e0e7c95-62f5-4c6b-bf9b-15b0f2240a17
OPENAI_BASE_URL=https://api-inference.modelscope.cn/v1
OPENAI_MODEL=ZhipuAI/GLM-4.5

# LangSmith é…ç½® (å¯é€‰)
LANGSMITH_PROJECT=agent-chat-server
# LANGSMITH_API_KEY=lsv2_your_api_key_here
```

### é…ç½®å‚æ•°è¯´æ˜

- **OPENAI_API_KEY**: é­”å¡”å¹³å°çš„ API å¯†é’¥
- **OPENAI_BASE_URL**: é­”å¡” API çš„åŸºç¡€ URL
- **OPENAI_MODEL**: ä½¿ç”¨çš„æ¨¡å‹åç§°ï¼ˆGLM-4.5ï¼‰
- **LANGSMITH_PROJECT**: LangSmith é¡¹ç›®åç§°ï¼ˆç”¨äºè¿½è¸ªï¼‰

## ä½¿ç”¨æ–¹æ³•

å¯åŠ¨æœåŠ¡å™¨åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¸æ™ºèƒ½åŠ©æ‰‹äº¤äº’ï¼š

1. **å‰ç«¯ç•Œé¢**: ä½¿ç”¨é…å¥—çš„ agent-chat-ui å‰ç«¯åº”ç”¨
2. **API è°ƒç”¨**: ç›´æ¥è°ƒç”¨ REST API
3. **Studio UI**: ä½¿ç”¨ LangGraph Studio è¿›è¡Œè°ƒè¯•

## æ”¯æŒçš„å¯¹è¯å’Œå·¥å…·

åŸºäº GLM-4.5 å¤§æ¨¡å‹å’Œ ReAct Agentï¼Œæ”¯æŒï¼š

### ğŸ› ï¸ å†…ç½®å·¥å…·

- â° **æ—¶é—´æŸ¥è¯¢** (`get_current_time`): è·å–å½“å‰æ—¶é—´
- ğŸŒ¤ï¸ **å¤©æ°”æŸ¥è¯¢** (`get_weather`): è·å–åŸå¸‚å¤©æ°”ä¿¡æ¯
- ğŸ§® **æ•°å­¦è®¡ç®—** (`calculate`): è¿›è¡Œæ•°å­¦è¡¨è¾¾å¼è®¡ç®—
- ğŸ“š **çŸ¥è¯†æœç´¢** (`search_knowledge`): æœç´¢å†…ç½®çŸ¥è¯†åº“

### ğŸŒ MCP æ‰©å±•å·¥å…·

- ğŸ” **ç½‘ç»œæœç´¢** (`bing_search`): å¿…åº”ä¸­æ–‡å®æ—¶æœç´¢ï¼Œè·å–æœ€æ–°ä¿¡æ¯
- ğŸ“Š **æ•°æ®å¯è§†åŒ–** (`generate_*_chart`): æ”¯æŒæŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€é¢ç§¯å›¾ç­‰å¤šç§å›¾è¡¨ç±»å‹

### ğŸ’¬ å¯¹è¯èƒ½åŠ›

- ğŸ“ **é€šç”¨é—®ç­”**: å„ç§çŸ¥è¯†é—®é¢˜ã€å­¦ä¹ è¾…å¯¼
- ğŸ’¼ **å·¥ä½œåŠ©æ‰‹**: æ–‡æ¡£å†™ä½œã€é‚®ä»¶èµ·è‰ã€æ–¹æ¡ˆåˆ¶å®š
- ğŸ§® **é€»è¾‘æ¨ç†**: æ•°å­¦è®¡ç®—ã€é€»è¾‘åˆ†æã€é—®é¢˜è§£å†³
- ğŸŒ **å¤šé¢†åŸŸçŸ¥è¯†**: ç§‘æŠ€ã€å†å²ã€æ–‡åŒ–ã€ç”Ÿæ´»å¸¸è¯†
- ğŸ’¬ **å¤šè½®å¯¹è¯**: ä¸Šä¸‹æ–‡ç†è§£ï¼Œè¿ç»­å¯¹è¯
- ğŸ¯ **ä»»åŠ¡æ‰§è¡Œ**: ä»£ç ç¼–å†™ã€æ–‡æœ¬å¤„ç†ã€åˆ›æ„å†™ä½œ

### ğŸ”§ å·¥å…·è°ƒç”¨ç¤ºä¾‹

**æœ¬åœ°å·¥å…·ï¼š**
- "ç°åœ¨å‡ ç‚¹äº†ï¼Ÿ" â†’ è‡ªåŠ¨è°ƒç”¨æ—¶é—´å·¥å…·
- "åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ" â†’ è‡ªåŠ¨è°ƒç”¨å¤©æ°”å·¥å…·
- "è®¡ç®— 2+3*4" â†’ è‡ªåŠ¨è°ƒç”¨è®¡ç®—å·¥å…·
- "ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ" â†’ è‡ªåŠ¨è°ƒç”¨çŸ¥è¯†æœç´¢å·¥å…·

**ç½‘ç»œæœç´¢ï¼š**
- "ä»Šå¤©çš„æ–°é—»æœ‰ä»€ä¹ˆï¼Ÿ" â†’ è‡ªåŠ¨è°ƒç”¨å¿…åº”æœç´¢
- "æœ€æ–°çš„AIæŠ€æœ¯å‘å±•" â†’ è‡ªåŠ¨è°ƒç”¨å¿…åº”æœç´¢
- "2024å¹´ç»æµå½¢åŠ¿" â†’ è‡ªåŠ¨è°ƒç”¨å¿…åº”æœç´¢

**æ•°æ®å¯è§†åŒ–ï¼š**
- "å¸®æˆ‘ç”»ä¸ªé”€å”®æ•°æ®çš„æŸ±çŠ¶å›¾" â†’ è‡ªåŠ¨è°ƒç”¨å›¾è¡¨ç”Ÿæˆå·¥å…·
- "ç”Ÿæˆäº§å“å¯¹æ¯”çš„æ¡å½¢å›¾" â†’ è‡ªåŠ¨è°ƒç”¨å›¾è¡¨ç”Ÿæˆå·¥å…·

## å¼€å‘è¯´æ˜

- **æ ¸å¿ƒé€»è¾‘**: `src/agent/graph.py` - åŸºäº LangChain å’Œ LangGraph çš„æ™ºèƒ½åŠ©æ‰‹å®ç°
- **å¤§æ¨¡å‹é›†æˆ**: ä½¿ç”¨ `langchain-openai` è¿æ¥é­”å¡” API
- **é”™è¯¯å¤„ç†**: åŒ…å«å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œé”™è¯¯æç¤º
- **ç³»ç»Ÿæç¤º**: å†…ç½®ä¸­æ–‡å‹å¥½çš„ç³»ç»Ÿæç¤ºè¯

## æŠ€æœ¯æ¶æ„

- **LangGraph ReAct Agent**: æ”¯æŒå·¥å…·è°ƒç”¨çš„æ™ºèƒ½ä»£ç†
- **LangChain Tools**: å·¥å…·æŠ½è±¡å’Œç®¡ç†
- **LangChain**: å¤§æ¨¡å‹æŠ½è±¡å±‚
- **é­”å¡” API**: GLM-4.5 å¤§æ¨¡å‹æœåŠ¡
- **OpenAI å…¼å®¹**: æ ‡å‡†åŒ– API æ¥å£

## å·¥å…·æ‰©å±•

å¯ä»¥è½»æ¾æ·»åŠ æ–°çš„å·¥å…·ï¼š

```python
@tool
def your_custom_tool(param: str) -> str:
    """å·¥å…·æè¿°"""
    # å·¥å…·å®ç°
    return "ç»“æœ"

# æ·»åŠ åˆ°å·¥å…·åˆ—è¡¨
tools.append(your_custom_tool)
```

---

Â© 2025 å·¦å²š. All rights reserved.
